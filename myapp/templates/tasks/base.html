{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Todo List{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
<style>
    .cursor-trail {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 9999;
    }

    .cursor-trail .dot {
        position: absolute;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.74);
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
        opacity: 0;
        will-change: transform, opacity;
    }

    @media (prefers-reduced-motion: reduce) {
        .cursor-trail {
            display: none;
        }
    }
</style>
</head>
<body>
    <div class="cursor-trail" aria-hidden="true"></div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-check-square"></i> Todo List
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}

        {% block content %}
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
            return;
        }

        const trail = document.querySelector(".cursor-trail");
        if (!trail) {
            return;
        }

        const dotCount = 8;
        const dots = [];
        for (let i = 0; i < dotCount; i += 1) {
            const dot = document.createElement("span");
            dot.className = "dot";
            trail.appendChild(dot);
            dots.push({ el: dot, x: 0, y: 0 });
        }

        let mouseX = window.innerWidth / 2;
        let mouseY = window.innerHeight / 2;
        let rafId = null;

        const update = () => {
            rafId = null;
            let x = mouseX;
            let y = mouseY;

            dots.forEach((dot, index) => {
                dot.x += (x - dot.x) * 0.25;
                dot.y += (y - dot.y) * 0.25;
                const scale = 1 - index / (dotCount + 1);
                dot.el.style.transform = `translate(${dot.x}px, ${dot.y}px) translate(-50%, -50%) scale(${scale})`;
                dot.el.style.opacity = `${0.45 * scale}`;
                x = dot.x;
                y = dot.y;
            });
        };

        const onMove = (event) => {
            mouseX = event.clientX;
            mouseY = event.clientY;
            if (!rafId) {
                rafId = requestAnimationFrame(update);
            }
        };

        window.addEventListener("mousemove", onMove);
        window.addEventListener("mouseout", () => {
            dots.forEach((dot) => {
                dot.el.style.opacity = "0";
            });
        });
    });
</script>
</body>
</html>